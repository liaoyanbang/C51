C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 1   


C51 COMPILER V9.05, COMPILATION OF MODULE YYH
OBJECT MODULE PLACED IN yyh.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE yyh.c OPTIMIZE(8,SPEED) DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          //////////////////////////////////////////////
   2          //51µ¥Æ¬»úÒôÀÖ²¥·ÅÆ÷³ÌÐò
   3          //¹²Èý¸ö°´¼ü:ÉÏÒ»Çú¡¢Ò»ÏÂÇú¡¢²¥·Å\ÔÝÍ£
   4          //×¢Òâ£º°´¼ü±ØÐë°´ÏÂÔ¼1S²ÅÓÐÏàÓ¦¶¯×÷,²¥·ÅÍêÒ»Ê×¸èÇúÎÞ°´¼ü°´ÏÂÊ±Ë³Ðò²¥·Å
   5          
   6          //////////////////////////////////////////////
   7          #include<REG52.H>
   8          sbit play_up=P1^3;     //ÉÏÒ»Ê×¸è
   9          sbit play_down=P3^5;   //ÏÂÒ»Ê×¸è
  10          sbit pause=P3^2;       //²¥·Å\ÔÝÍ£
  11          sbit speaker=P1^0;     //ÎÞÔ´·äÃùÆ÷
  12          sbit RS=P2^5;
  13          sbit RW=P2^6;
  14          sbit EN=P2^7;
  15          //////////////////////////////////////////////
  16          unsigned char timer0h,timer0l,time;//timer0h,timer0lÎª¶¨Ê±Æ÷T0µÄ¸ßµÍÎ»³õÖµ,timeÎª¶ÔÓ¦µÄ½ÚÅÄÊ±¼ä
  17          unsigned char music_num;       //music_numÎª¸èÇú±àºÅ,music_num=0±íÊ¾¸Õ¿ª»úÊ±µÄ×´Ì¬,numÊÇ²éÕÒ¸èÇúÊý¾Ý±íµÄµØ
             -Ö·
  18          unsigned int num;
  19          unsigned char code   list[8][16]={  "Yan Hua Yi Leng ",
  20                            "   Fa Ru Xue    ",
  21                            "  Jian Dan Ai   ",
  22                            "Zhi You Mama Hao",
  23                            " Dang Ni Gu Dan ",
  24                            "XiangJian XiaoLu",
  25                            "    Song Bie    ",
  26                            "Lang Man De Shi "};
  27          signed int fre;                   //¶ÔÓ¦ÆµÂÊÊý¾Ý±íµÄµØÖ·
  28          bit play_enable;                   //¸èÇú²¥·ÅµÄÊ¹ÄÜ±êÖ¾Î»,ÓÃÓÚ²¥·Å\ÔÝÍ£
  29          void delay(unsigned char t);     //ÑÓÊ±×Óº¯Êý,¿ØÖÆ·¢ÒôµÄÊ±¼ä³¤¶È
  30          void delayms(unsigned int t);    //ÆÕÍ¨ÑÓÊ±×Ó³ÌÐò,¿ÉÓÃÓÚ°´¼üÏû¶¶
  31          void song(void);               //ÑÝ×àÒ»¸öÒô·û
  32          void music_play(void);             //²¥·Å¸èÇú
  33          //////////////////////////////////////////////
  34          //Ã¿Èý¸öÊý×Ö,´ú±íÒ»¸öÒô·û
  35          //µÚÒ»¸öÊý×ÖÊÇÒô·ûµÄÊýÖµ1234567Ö®Ò»(µÚ¼¸¸öÒô),´ú±í¶ßÀ´ßä·¢...
  36          //µÚ¶þ¸öÊý×ÖÊÇ0123Ö®Ò»,´ú±íµÍÒô\ÖÐÒô\¸ßÒô\³¬¸ßÒô(µÚ¼¸¸ö°Ë¶È)
  37          //µÚÈý¸öÊý×ÖÊÇÊ±¼ä³¤¶È,ÒÔ°ëÅÄÎªµ¥Î»,ÀÖÇúÊý¾Ý±íµÄ½áÎ²ÊÇÈý¸ö0
  38          //////////////////////////////////////////////
  39          
  40          //¡¶ÑÌ»¨Ò×Àä¡·
  41          unsigned char code song1[]={
  42               5,2,1, 3,2,1, 2,2,2, 2,2,4, 3,2,1, 1,2,1, 2,2,1, 3,2,4, 
  43             5,2,1, 3,2,1, 2,2,2, 2,2,2, 5,1,1, 3,2,1, 4,2,1, 3,2,4, 
  44             3,2,1, 3,2,1, 7,2,1, 3,2,1, 2,2,2, 1,2,1, 7,1,1, 1,2,1, 
  45             2,2,1, 3,2,1, 6,2,3, 6,1,1, 1,2,1, 3,2,1, 2,2,1, 6,1,1, 
  46             1,2,1, 7,1,1, 5,1,1, 6,1,6, 5,2,1, 3,2,1, 2,2,2, 2,2,1, 
  47             2,2,1, 3,2,1, 1,2,1, 2,2,1, 3,2,4, 5,2,1, 3,2,1, 2,2,2, 
  48             2,2,1, 2,2,1, 5,1,1, 3,2,1, 4,2,1, 3,2,4, 3,2,1, 3,2,1, 
  49             7,2,3, 3,2,1, 2,2,2, 1,2,1, 7,1,1, 1,2,1, 2,2,1, 3,2,1, 
  50             6,2,3, 6,1,1, 1,2,1, 3,2,1, 2,2,1, 6,1,1, 1,2,1, 7,1,2, 
  51             5,1,2, 6,1,6, 0,0,0 };
  52          
  53          //¡¶·¢ÈçÑ©¡·
  54          unsigned char code song2[]={
C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 2   

  55               5,1,1, 2,2,1, 3,2,2, 2,2,1, 3,2,1, 5,2,1, 6,2,1, 5,2,3, 1,2,1, 2,2,1, 
  56             3,2,1, 6,2,1, 5,2,1, 3,2,1, 5,2,3, 5,2,1, 6,2,1, 1,3,2, 6,2,1, 5,2,1, 
  57             3,2,1, 5,2,1, 3,2,2, 1,2,1, 2,2,1, 3,2,1, 1,2,1, 6,1,1, 3,2,1, 2,2,1, 
  58             5,1,1, 2,2,1, 3,2,2, 2,2,1, 3,2,1, 5,2,1, 6,2,1, 5,2,3, 1,2,1, 2,2,1, 
  59             3,2,1, 6,2,1, 5,2,3, 5,2,1, 6,2,1, 1,3,2, 6,2,1, 
  60             5,2,1, 3,2,1, 5,2,1, 3,2,2, 5,2,1, 6,1,1, 3,2,1, 2,2,1, 1,2,1, 6,1,1, 
  61             1,2,1, 2,2,1, 2,2,1, 1,2,4, 0,0,0 };
  62          
  63          //¡¶¼òµ¥°®¡·
  64          unsigned char code song3[]={
  65               5,1,1, 1,2,1, 2,2,1, 3,2,1, 2,2,1, 3,2,1, 4,2,1, 5,2,1, 5,2,1, 5,2,1, 
  66             4,2,1, 3,2,1, 2,2,3, 5,1,1, 1,2,1, 2,2,1, 3,2,1, 4,2,1, 5,2,1, 5,2,1, 
  67             5,2,1, 6,2,1, 5,2,2, 2,2,1, 3,2,1, 1,2,2, 1,2,1, 6,1,1, 2,2,1, 2,2,1, 
  68             3,2,1, 3,2,1, 1,2,1, 5,2,1, 1,2,1, 5,2,1, 1,2,1, 7,1,1, 1,2,1, 1,2,1, 6,1,1, 
  69             2,2,1, 2,2,1, 3,2,1, 3,2,1, 5,2,1, 5,2,1, 
  70             5,2,1, 6,2,1, 5,2,2, 2,2,1, 3,2,1, 1,2,2,  
  71             5,1,1, 1,2,1, 2,1,2, 3,2,1, 2,2,1, 3,2,1, 4,2,1, 5,2,1, 5,2,1, 5,2,1, 
  72             4,2,1, 3,2,1, 2,2,3, 5,1,1, 1,2,1, 2,2,1, 3,2,1, 2,2,1, 3,2,1, 4,2,1, 
  73             5,2,1, 5,2,1, 5,2,2, 2,2,1, 3,2,1, 1,2,2, 1,2,1, 6,1,1, 2,2,1, 2,2,1, 
  74             3,2,1, 3,2,1, 1,2,2, 5,2,1, 1,2,1, 5,2,1, 5,2,1, 7,1,1, 1,2,1, 0,0,0 };
  75          
  76          //¡¶ÊÀÉÏÖ»ÓÐÂèÂèºÃ¡·
  77          unsigned char code song4[]={
  78               6,2,3, 5,2,1, 3,2,2, 5,2,2, 1,3,2, 6,2,1,
  79             //6,2,3´ú±í6,ÖÐÒô,3¸ö°ëÅÄ;
  80             //5,2,1´ú±í5,ÖÐÒô,1¸ö°ëÅÄ;
  81             //3,2,2´ú±í3,ÖÐÒô,2¸ö°ëÅÄ;
  82             //5,2,2´ú±í5,ÖÐÒô,2¸ö°ëÅÄ;
  83             //1,3,2´ú±í1,¸ßÒô,2¸ö°ëÅÄ;
  84             //...
  85               5,2,1,6,2,4, 3,2,2, 5,2,1, 6,2,1, 5,2,2, 3,2,2, 1,2,1,6,1,1, 5,2,1, 
  86             3,2,1, 2,2,4, 2,2,3, 1,2,1, 5,2,2, 5,2,1, 6,2,1, 3,2,2, 2,2,2, 
  87             1,2,4, 5,2,3, 3,2,1,2,2,1, 1,2,1, 6,1,1, 1,2,1, 5,1,6, 0,0,0};
  88          
  89          //¡¶µ±Äã¹Âµ¥Äã»áÏëÆðË­¡·
  90          unsigned char code song5[]={
  91               3,2,2, 3,2,1, 4,2,1, 3,2,2, 2,2,1, 1,2,1,  2,2,2, 5,2,2, 2,2,2, 2,2,3,
  92             1,2,2, 1,2,1, 6,2,1, 1,2,2, 7,1,1, 6,1,1, 7,1,2, 3,2,2, 7,1,2, 7,1,3, 
  93             6,1,2, 2,2,1, 3,2,1, 2,2,1, 1,2,1, 6,1,2, 5,1,2, 2,2,1, 3,2,1, 2,2,1, 
  94             1,2,1, 6,1,2, 6,1,2, 2,2,1, 3,2,1, 2,2,1, 1,2,1, 6,1,1, 7,1,1, 1,2,6, 0,0,0 };
  95          
  96          //¡¶Ïç¼äÐ¡Â·¡·
  97          unsigned char code song6[]={
  98               3,1,2, 3,1,1, 3,1,1, 6,0,1, 6,0,1, 1,1,2,
  99               6,0,1, 5,0,1, 6,0,4, 6,0,2, 6,0,1 ,6,0,1, 6,0,2, 6,0,1, 1,1,1, 
 100               2,1,2, 2,1,1, 3,1,1, 2,1,4, 3,5,1, 3,1,1, 3,1,1, 2,1,1, 4,1,2,
 101               4,1,2, 3,1,2, 2,1,1, 1,1,1, 2,1,4, 7,0,1, 7,0,1, 7,0,1, 6,0,1, 
 102               5,0,1, 5,0,1, 6,0,1, 7,0,1, 7,0,1, 6,0,1, 5,0,1, 6,0,4, 6,1,2,
 103               3,1,1, 6,1,1, 7,1,1, 6,1,1, 5,1,1, 5,1,2, 5,1,1, 2,1,1, 5,1,1, 
 104               6,1,1, 5,1,1, 4,1,1, 4,1,2, 4,1,1, 3,1,1, 2,1,2, 1,1,1, 2,1,1, 
 105               3,1,1, 2,1,1, 1,1,1, 2,1,1, 3,1,4, 6,1,2, 3,1,1, 6,1,1, 7,1,1, 
 106             6,1,1, 5,1,1, 5,1,2, 2,1,1, 5,1,1, 6,1,1, 5,1,1, 4,1,1, 0,0,0};     
 107          
 108          //¡¶ËÍ±ð¡·
 109          unsigned char code song7[]={
 110               5,1,2, 3,1,3, 5,1,1, 1,2,3, 6,1,2, 1,2,2, 
 111               5,1,4, 5,1,2, 1,1,1, 2,1,1, 3,1,2, 2,1,1, 1,1,1, 2,1,4, 5,1,2, 
 112             3,1,1, 5,1,1, 1,2,2, 7,1,1, 6,1,2, 1,2,2, 5,1,4, 5,1,2, 2,1,1, 
 113             3,1,1, 4,1,2, 7,0,1, 1,1,4, 6,1,2, 1,2,2, 1,2,4, 7,1,2, 6,1,1,
 114             7,1,1, 1,2,4, 6,1,1, 7,1,1, 1,2,1, 6,1,1, 6,1,1, 5,1,1, 3,1,1, 
 115             1,1,1, 2,1,8, 5,1,2, 3,1,1, 5,1,1, 1,2,2, 7,1,1, 6,1,2, 1,2,2, 
 116             5,1,4, 5,1,2, 2,1,1, 3,1,1, 4,1,2, 7,0,2, 1,1,4, 0,0,0};
C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 3   

 117          
 118          //¡¶×îÀËÂþµÄÊÂ¡·
 119          unsigned char code song8[]={
 120               5,1,1, 6,1,1, 1,2,1, 6,1,2, 6,1,1, 5,1,1, 6,1,1, 5,1,1, 3,1,1, 5,1,5, 
 121             5,1,1, 6,1,1, 1,2,1, 6,1,2, 6,1,1, 5,1,1, 6,1,1, 5,1,1, 6,1,1, 1,1,5, 
 122             1,1,1, 2,1,1, 3,1,1, 2,1,1, 2,1,1, 2,1,1, 1,1,1, 2,1,1, 1,1,1, 6,1,1, 
 123             3,1,2, 2,1,3, 5,1,1, 6,1,1, 1,2,1, 6,1,2, 6,1,1, 5,1,1, 6,1,1, 5,1,1, 
 124             6,1,1, 1,1,5, 1,1,1, 2,1,1, 3,1,1, 4,1,2, 4,1,1, 5,1,1, 6,1,1, 6,1,1, 
 125             5,1,1, 6,1,2, 1,2,1, 6,1,3, 1,2,1, 6,1,1, 5,1,1, 5,1,4, 1,1,1, 6,1,1, 
 126             5,1,5, 5,1,1, 6,1,1, 1,2,1, 3,1,1, 2,1,1, 3,1,1, 1,1,6, 0,0,0}; 
 127          
 128          // ÆµÂÊ-°ëÖÜÆÚÊý¾Ý±í ¸ß°ËÎ»  ¹²±£´æÁËËÄ¸ö°Ë¶ÈµÄ28¸öÆµÂÊÊý¾Ý
 129          unsigned char code FREQH[]={
 130              0xF2, 0xF3, 0xF5, 0xF5, 0xF6, 0xF7, 0xF8,    //µÍÒô1234567
 131              0xF9, 0xF9, 0xFA, 0xFA, 0xFB, 0xFB, 0xFC, 0xFC,//1,2,3,4,5,6,7,i
 132              0xFC, 0xFD, 0xFD, 0xFD, 0xFD, 0xFE,            //¸ßÒô 234567
 133              0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFF};   //³¬¸ßÒô 1234567
 134          
 135          // ÆµÂÊ-°ëÖÜÆÚÊý¾Ý±í µÍ°ËÎ»
 136          unsigned char code FREQL[]={
 137              0x42, 0xC1, 0x17, 0xB6, 0xD0, 0xD1, 0xB6,    //µÍÒô1234567
 138              0x21, 0xE1, 0x8C, 0xD8, 0x68, 0xE9, 0x5B, 0x8F, //1,2,3,4,5,6,7,i
 139              0xEE, 0x44, 0x6B, 0xB4, 0xF4, 0x2D,             //¸ßÒô 234567
 140              0x47, 0x77, 0xA2, 0xB6, 0xDA, 0xFA, 0x16};   //³¬¸ßÒô 1234567  
 141          
 142          /*************************lcd1602³ÌÐò**************************/
 143           void delay1ms(unsigned int ms)//ÑÓÊ±1ºÁÃë£¨²»¹»¾«È·µÄ£©
 144           {unsigned int i,j;
 145   1         for(i=0;i<ms;i++)
 146   1          for(j=0;j<100;j++);
 147   1       }
 148          
 149          void wr_com(unsigned char com)//Ð´Ö¸Áî//
 150           {  delay1ms(1);
 151   1         RS=0;
 152   1         RW=0;
 153   1         EN=0;
 154   1         P0=com;
 155   1         delay1ms(1);
 156   1         EN=0;
 157   1         delay1ms(1);
 158   1         EN=1;
 159   1        }
 160          
 161          void wr_dat(unsigned char dat)//Ð´Êý¾Ý//
 162          {  delay1ms(1);;
 163   1         RS=1;
 164   1         RW=1;
 165   1         EN=1;
 166   1         P0=dat;
 167   1         delay1ms(1);
 168   1         EN=0;
 169   1         delay1ms(1);
 170   1         EN=1;
 171   1      }
 172          
 173           void lcd_init()//³õÊ¼»¯ÉèÖÃ//
 174          {delay1ms(15);
 175   1      wr_com(0x01);
 176   1        wr_com(0x38);delay1ms(5);
 177   1      wr_com(0x0c);
 178   1      wr_com(0x06);
C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 4   

 179   1      }
 180          void init_play()
 181          {
 182   1       wr_com(0x80+40+4);
 183   1       wr_dat('W');
 184   1       wr_dat('E');
 185   1       wr_dat('L');
 186   1       wr_dat('C');
 187   1       wr_dat('O');
 188   1       wr_dat('M');
 189   1       wr_dat('E');
 190   1       wr_dat('!');
 191   1        
 192   1      }
 193           void display(unsigned char i)
 194           {
 195   1         unsigned char j;
 196   1         wr_com(0x80);
 197   1         wr_dat(i+0x30);
 198   1         wr_dat(':');
 199   1         wr_com(0xc0);
 200   1         for(j=0;j<16;j++)
 201   1         {
 202   2          wr_dat(list[i-1][j]);
 203   2        }
 204   1       }
 205          void main(void)
 206          {
 207   1        TMOD=0x11; //T0 T1 ¾ùÔÚ¹¤×÷·½Ê½1
 208   1        ET0=1;  //T0¿ªÖÐ¶Ï
 209   1        EA=1;   //CPU¿ªÖÐ¶Ï  
 210   1        lcd_init();
 211   1        init_play();
 212   1        while(1)
 213   1        {
 214   2          music_play(); //¸ù¾Ýµ±Ç°×´Ì¬²¥·ÅÏàÓ¦¸èÇúµÄÄ³¸öÒô·û
 215   2      
 216   2          if(!pause)    //ÔÝÍ£¼ü´¦Àí
 217   2          {
 218   3          delayms(5);
 219   3          if(!pause)
 220   3          {
 221   4            if(music_num==0)    //music_num=0Ö»ÓÐÔÚ¸Õ¿ª»ú,ÇÒÎ´°´ÏÂÔÝÍ£¼üÊ±´æÔÚ,±íÊ¾¸Õ¿ª»úÊ±µÄ×´Ì¬,°´ÏÂºó´ÓµÚÒ»Ê×¿ªÊ
             -¼²¥·Å
 222   4            {
 223   5              music_num=1;    //¸èÇúÐòºÅÖÃ1
 224   5              num=0;          //´ÓÍ·²¥·Å
 225   5              play_enable=1;  //ÔÊÐí²¥·Å
 226   5              display(1);
 227   5                if(play_enable)
 228   5              {wr_com(0x86);wr_dat('P'); wr_dat('L');wr_dat('A');wr_dat('Y');wr_dat(' '); }
 229   5            }
 230   4            else
 231   4            {
 232   5              play_enable=~play_enable;
 233   5                speaker=1;
 234   5              if(play_enable)
 235   5              {wr_com(0x86);wr_dat('P'); wr_dat('L');wr_dat('A');wr_dat('Y');wr_dat(' '); }
 236   5              if(!play_enable)
 237   5              {wr_com(0x86);wr_dat('P'); wr_dat('A');wr_dat('U');wr_dat('S');wr_dat('E'); }
 238   5      
 239   5            }
C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 5   

 240   4            while(!pause)  //Èô°´×ÅÔÝÍ£¼ü²»·ÅÊÖÊ±µÄ´¦Àí
 241   4            {
 242   5            if(play_enable==0){}          //Èç¹ûÊÇÔÝÍ££¬ÔòÏÔÊ¾Ê±¼ä²»±ä//£¨ÔÝÍ£Ê±play_enable==0£©
 243   5            }
 244   4      
 245   4            }//ÔÝÍ£¼ü´¦Àí½áÊø
 246   3        }//while½áÊø
 247   2      
 248   2          if((!play_up)&&(music_num!=0)) //ÉÏÒ»Ê×°´¼ü
 249   2          {
 250   3          delayms(5);
 251   3          if((!play_up)&&(music_num!=0))
 252   3          {   speaker=1;
 253   4            music_num-=1;//¸èÇú±àºÅ¼õÒ»
 254   4            if(music_num<=0)
 255   4            music_num=8;
 256   4            num=0;     //´ÓÍ·¿ªÊ¼²¥·Å
 257   4              display(music_num);
 258   4            delayms(500);//¸èÇúÇÐ»»Ê±ÑÓÊ±0.5S
 259   4          } 
 260   3          }
 261   2      
 262   2          if((!play_down)&&(music_num!=0))
 263   2          {
 264   3          delayms(5);
 265   3          if((!play_down)&&(music_num!=0))
 266   3          {   speaker=1;
 267   4            music_num+=1;//¸èÇú±àºÅ¼ÓÒ»
 268   4            if(music_num>=9)
 269   4            music_num=1;
 270   4            num=0;     //´ÓÍ·¿ªÊ¼²¥·Å
 271   4              display(music_num);
 272   4            delayms(500);//¸èÇúÇÐ»»Ê±ÑÓÊ±0.5S
 273   4          }
 274   3          }
 275   2      
 276   2        }
 277   1      } 
 278          
 279          void delayms(unsigned int t)     //MSÑÓÊ±×Ó³ÌÐò
 280          {
 281   1        unsigned int i,j;
 282   1        for(i=0;i<t;i++)
 283   1        {
 284   2          for(j=0;j<123;j++)
 285   2            ;
 286   2        }
 287   1      }
 288          
 289          void delay(unsigned char t)     //ÑÓÊ±×Óº¯Êý,¿ØÖÆ·¢ÒôµÄÊ±¼ä³¤¶È,Ã¿¸ö½ÚÅÄ0.4S
 290          {
 291   1        unsigned char t1;
 292   1        unsigned long t2;
 293   1        for(t1=0;t1<t;t1++)        //Ç¶Ì×Ñ­»·, ¹²ÑÓÊ±t¸ö°ëÅÄ
 294   1        {
 295   2            for(t2=0;t2<8000;t2++) //ÑÓÊ±ÆÚ¼ä, ¿É½øÈëT0ÖÐ¶ÏÈ¥·¢Òô
 296   2              {
 297   3                ;
 298   3              }
 299   2        }
 300   1        TR0=0;                   //¹Ø±ÕT0, Í£Ö¹·¢Òô
 301   1      }
C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 6   

 302          
 303          void timer0(void) interrupt 2  //T0ÖÐ¶Ï³ÌÐò,¿ØÖÆ·¢ÒôµÄÒôµ÷
 304          {
 305   1        speaker=!speaker;//Êä³ö·½²¨, ·¢Òô
 306   1        TH0=timer0h;   //ÏÂ´ÎµÄÖÐ¶ÏÊ±¼ä,Õâ¸öÊ±¼ä¿ØÖÆÒôµ÷¸ßµÍ
 307   1        TL0=timer0l;
 308   1       }
 309          
 310          void song(void)   //ÑÝ×àÒ»¸öÒô·û
 311          {
 312   1        TH0=timer0h;    //¿ØÖÆÒôµ÷
 313   1        TL0=timer0l;
 314   1        TR0=1;        //Æô¶¯T0, ÓÉT0Êä³ö·½²¨·¢Òô
 315   1        delay(time);    //Ã¿¸öÒô·ûµÄÑÝ×àÊ±¼ä
 316   1      }
 317          ////////////////////////////////////////////////////////////////////////////////////
 318          void music_play(void)//²¥·ÅÏàÓ¦¸èÇúµÄÄ³¸öÒô·û
 319          {
 320   1        if((music_num==1)&&(play_enable==1))
 321   1        {
 322   2          fre=song1[num]+8*song1[num+1]-1;//µÚi¸öÊÇÒô·û,µÚi+1¸öÊÇµÚ¼¸¸ö°Ë¶È
 323   2          timer0h=FREQH[fre];             //´ÓÊý¾Ý±íÖÐ¶Á³öÆµÂÊÊýÖµ,Êµ¼ÊÉÏÊÇ¶¨Ê±µÄÊ±¼ä³¤¶È
 324   2            timer0l=FREQL[fre];
 325   2            time=song1[num+2];              //¶Á³öÊ±¼ä³¤¶ÈÊýÖµ
 326   2            num+=3;
 327   2          if(fre<0)   //ÅÐ¶Ï¸èÇúµÄ½áÊøÎ»,½áÊøºó×ªµ½ÏÂÒ»Ê×
 328   2          {
 329   3            num=0;      //ÏÂÒ»Ê×´ÓÍ·²¥·Å
 330   3            music_num=2;
 331   3              display(2);
 332   3            }
 333   2          song();         //·¢³öÒ»¸öÒô·û
 334   2        }
 335   1      ////////////////////////////////////////////////////////////////////////////////////
 336   1        if((music_num==2)&&(play_enable==1))
 337   1        {  
 338   2          fre=song2[num]+8*song2[num+1]-1;
 339   2          timer0h=FREQH[fre];
 340   2            timer0l=FREQL[fre];
 341   2            time=song2[num+2];
 342   2            num+=3;
 343   2          if(fre<0)
 344   2          {
 345   3            num=0;
 346   3            music_num=3;
 347   3              display(3);
 348   3            }
 349   2          song();   
 350   2        }
 351   1      ////////////////////////////////////////////////////////////////////////////////////
 352   1          if((music_num==3)&&(play_enable==1))
 353   1        {  
 354   2          fre=song3[num]+8*song3[num+1]-1;
 355   2          timer0h=FREQH[fre];
 356   2            timer0l=FREQL[fre];
 357   2            time=song3[num+2];
 358   2            num+=3;
 359   2          if(fre<0)
 360   2          {
 361   3            num=0;
 362   3            music_num=4;
 363   3              display(4);
C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 7   

 364   3            }
 365   2          song();   
 366   2        }
 367   1      ////////////////////////////////////////////////////////////////////////////////////
 368   1        if((music_num==4)&&(play_enable==1))
 369   1        {
 370   2          fre=song4[num]+8*song4[num+1]-1;
 371   2          timer0h=FREQH[fre];
 372   2            timer0l=FREQL[fre];
 373   2            time=song4[num+2];
 374   2            num+=3;
 375   2          if(fre<0)
 376   2          {
 377   3            num=0;
 378   3            music_num=5; 
 379   3              display(5);
 380   3            }
 381   2          song();   
 382   2        }
 383   1      ////////////////////////////////////////////////////////////////////////////////////
 384   1        if((music_num==5)&&(play_enable==1))
 385   1        {
 386   2          fre=song5[num]+8*song5[num+1]-1;
 387   2          timer0h=FREQH[fre];
 388   2            timer0l=FREQL[fre];
 389   2            time=song5[num+2];
 390   2            num+=3;
 391   2          if(fre<0)
 392   2          {
 393   3            num=0;
 394   3            music_num=6;
 395   3              display(6);
 396   3            }
 397   2          song();   
 398   2        }
 399   1      ////////////////////////////////////////////////////////////////////////////////////
 400   1        if((music_num==6)&&(play_enable==1))
 401   1        {
 402   2          fre=song6[num]+8*song6[num+1]-1;
 403   2          timer0h=FREQH[fre];
 404   2            timer0l=FREQL[fre];
 405   2            time=song6[num+2];
 406   2            num+=3;
 407   2          if(fre<0)
 408   2          {
 409   3            num=0;
 410   3            music_num=7;
 411   3              display(7);
 412   3            }
 413   2          song();   
 414   2        }
 415   1      ////////////////////////////////////////////////////////////////////////////////////
 416   1      if((music_num==7)&&(play_enable==1))
 417   1        {
 418   2          fre=song7[num]+8*song7[num+1]-1;
 419   2          timer0h=FREQH[fre];
 420   2            timer0l=FREQL[fre];
 421   2            time=song7[num+2];
 422   2            num+=3;
 423   2          if(fre<0)
 424   2          {
 425   3            num=0;
C51 COMPILER V9.05   YYH                                                                   11/13/2021 00:58:37 PAGE 8   

 426   3            music_num=8;
 427   3              display(8);
 428   3            }
 429   2          song();   
 430   2        }
 431   1      ////////////////////////////////////////////////////////////////////////////////////
 432   1      if((music_num==8)&&(play_enable==1))
 433   1        {
 434   2          fre=song8[num]+8*song8[num+1]-1;
 435   2          timer0h=FREQH[fre];
 436   2            timer0l=FREQL[fre];
 437   2            time=song8[num+2];
 438   2            num+=3;
 439   2          if(fre<0)
 440   2          {
 441   3            num=0;
 442   3            music_num=1;
 443   3            display(1);
 444   3            }
 445   2          song();   
 446   2        }
 447   1      ////////////////////////////////////////////////////////////////////////////////////
 448   1      }
 449          //³ÌÐò½áÊø
 450          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1569    ----
   CONSTANT SIZE    =   1717    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      8       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      1    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
